# Ação para gerar os arquivos (isso deve vir primeiro)
- name: ...
  # ... (suas etapas de compilação/cópia que geram repo.json e os .cs3 na pasta 'builds/')
  # ...

# --- Use ESTE bloco para o deploy ---
- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    # Este é o ponto CRÍTICO: a pasta 'builds/' é onde o seu repo.json e os .cs3 estão.
    # A ação peaceiris vai commitar o CONTEÚDO desta pasta para o branch gh-pages.
    publish_dir: ./builds
    # A mensagem que aparecerá no histórico de commits do branch gh-pages
    commit_message: "Build: Automatic deployment of CloudStream providers"
    # Você já está usando o branch gh-pages, mas é bom garantir:
    publish_branch: gh-pages
